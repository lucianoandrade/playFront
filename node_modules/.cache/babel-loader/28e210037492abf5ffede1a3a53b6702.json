{"ast":null,"code":"var _jsxFileName = \"/Users/luciano/Desktop/Projetos/PlayerStars/frontend/src/pages/CodConfirmacao/index.js\";\nimport React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { withAlert } from 'react-alert';\nimport { Auth } from \"aws-amplify\";\nimport { Form, withFormik } from \"formik\";\nimport * as Yup from \"yup\";\nimport PageContainer from \"../../components/features/PageContainer\";\nimport Email from \"../../assets/icons/email.png\";\nimport FormField from \"../../components/elements/FormField\";\nimport \"./styles.scss\";\n\nconst confirmSignUp = props => {\n  const resendCode = ev => {\n    ev.preventDefault();\n    Auth.forgotPassword(props.history.location.state.email).then(data => {\n      props.alert.success('Codigo enviado');\n    }).catch(err => console.log('ERROR', err));\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(PageContainer, {\n    register: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"containerCodConfirm\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"lightBox\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"lightBoxContent\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: Email,\n    alt: \"Icone email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30\n    },\n    __self: this\n  }), React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31\n    },\n    __self: this\n  }, \"Confirme seu e-mail\"), React.createElement(\"p\", {\n    className: \"paragraph\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  }, \"Enviamos um c\\xF3digo de confirma\\xE7\\xE3o por e-mail para voc\\xEA. Por favor, digite-o abaixo.\"), React.createElement(Form, {\n    className: \"formConfirm\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"inputInline\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }, React.createElement(FormField, {\n    id: \"codConfirm\",\n    type: \"text\",\n    name: \"codigo\",\n    label: \"C\\xF3digo de confirma\\xE7\\xE3o\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    className: \"btnDefault\",\n    type: \"submit\",\n    style: atv(),\n    disabled: !props.isValid,\n    required: props.isSubmitting,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, \"Confirmar\"), React.createElement(\"button\", {\n    className: \"btnSecundary\",\n    type: \"submit\",\n    onClick: resendCode,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, \"Reenviar C\\xF3digo\")))))));\n\n  function atv() {\n    const x = props.isValid;\n\n    if (x === true) {\n      return {\n        background: \"#000\"\n      };\n    } else {\n      return {\n        background: \"#BBB\"\n      };\n    }\n  }\n};\n\nconst ConfirmSignupForm = withRouter(withFormik({\n  mapPropsToValues({\n    codigo\n  }) {\n    return {\n      codigo: codigo || \"\"\n    };\n  },\n\n  validationSchema: Yup.object().shape({\n    codigo: Yup.string().required(\"Campo obrigatório\").length(6, \"Codigo inválido\")\n  }),\n\n  handleSubmit({\n    codigo\n  }, {\n    props,\n    setFieldError,\n    setSubmitting\n  }) {\n    setSubmitting(true);\n\n    if (props.location.state.pathname === \"/esqueci-senha\") {\n      props.history.push(\"/nova-senha\", {\n        email: props.history.location.state.email,\n        code: code\n      });\n    } else {\n      Auth.confirmSignUp(props.history.location.state.email, codigo.toString()).then(result => {\n        setSubmitting(false);\n        Auth.signIn(props.history.location.state.email, props.history.location.state.senha).then(response => {\n          props.alert.success(\"E-mail validado com sucesso!\");\n          props.history.push(\"/seus-dados\", {\n            initCadastro: props.history.location.state.email,\n            senha: props.history.location.state.senha,\n            codigoconfimacao: codigo\n          });\n          console.log(\"Minhas props no codigo de confirmação são\", props.history.location);\n        }).catch(error => {\n          console.log(\"Erro \", error);\n          const messageDefault = \"Ocorreu um erro inesperado.\";\n          const selectErrorMessage = {\n            NotAuthorizedException: \"E-mail ou senha incorretos.\",\n            UserNotFoundException: \"O usuário não foi encontrado.\",\n            PasswordResetRequiredException: 'A sua senha foi resetada. Crie uma nova em \"esqueci minha senha\".',\n            InvalidPasswordException: \"A senha deve conter ao mínimo 8 dígitos.\"\n          };\n          return props.alert.error(selectErrorMessage[error.code] || messageDefault);\n        });\n      }).catch(error => {\n        console.log(\"Erro confirmando assinatura: \", error);\n        props.alert.error(\"Codigo de confirmação invalido\");\n        setSubmitting(false);\n      });\n    }\n  }\n\n})(confirmSignUp));\nexport default withAlert()(ConfirmSignupForm);","map":{"version":3,"sources":["/Users/luciano/Desktop/Projetos/PlayerStars/frontend/src/pages/CodConfirmacao/index.js"],"names":["React","withRouter","withAlert","Auth","Form","withFormik","Yup","PageContainer","Email","FormField","confirmSignUp","props","resendCode","ev","preventDefault","forgotPassword","history","location","state","email","then","data","alert","success","catch","err","console","log","atv","isValid","isSubmitting","x","background","ConfirmSignupForm","mapPropsToValues","codigo","validationSchema","object","shape","string","required","length","handleSubmit","setFieldError","setSubmitting","pathname","push","code","toString","result","signIn","senha","response","initCadastro","codigoconfimacao","error","messageDefault","selectErrorMessage","NotAuthorizedException","UserNotFoundException","PasswordResetRequiredException","InvalidPasswordException"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { withAlert } from 'react-alert';\nimport { Auth } from \"aws-amplify\";\nimport { Form, withFormik } from \"formik\";\nimport * as Yup from \"yup\";\nimport PageContainer from \"../../components/features/PageContainer\";\nimport Email from \"../../assets/icons/email.png\";\nimport FormField from \"../../components/elements/FormField\";\n\nimport \"./styles.scss\";\n\nconst confirmSignUp = (props) => {\n\n  const resendCode = ev => {\n    ev.preventDefault()\n    Auth.forgotPassword(props.history.location.state.email)\n    .then(data => {\n        props.alert.success('Codigo enviado');\n    })\n    .catch(err => console.log('ERROR', err));\n  }\n\n  return (\n    <>\n      <PageContainer register={true}>\n        <div className=\"containerCodConfirm\">\n          <div className=\"lightBox\">\n            <div className=\"lightBoxContent\">\n              <img src={Email} alt=\"Icone email\" />\n              <h3>Confirme seu e-mail</h3>\n              <p className=\"paragraph\">\n                Enviamos um código de confirmação por e-mail para você. Por favor, digite-o abaixo.\n              </p>\n              <Form className=\"formConfirm\">\n                <div className=\"inputInline\">\n                  <FormField\n                    id=\"codConfirm\"\n                    type=\"text\"\n                    name=\"codigo\"\n                    label=\"Código de confirmação\"\n                  />\n                </div>\n                <button\n                  className=\"btnDefault\"\n                  type=\"submit\"\n                  style={atv()}\n                  disabled={!props.isValid}\n                  required={props.isSubmitting}\n                >\n                  Confirmar\n                </button>\n                <button \n                className=\"btnSecundary\" \n                type=\"submit\"\n                onClick={resendCode}\n                >\n                  Reenviar Código\n                </button>\n              </Form>\n            </div>\n          </div>\n        </div>\n      </PageContainer>\n    </>\n  );\n  function atv() {\n    const x = props.isValid;\n    if (x === true) {\n      return { background: `#000` };\n    } else {\n      return { background: `#BBB` };\n    }\n  }\n};\n\nconst ConfirmSignupForm = withRouter(\n  withFormik({\n    mapPropsToValues({ codigo }) {\n      return {\n        codigo: codigo || \"\",\n      };\n    },\n    validationSchema: Yup.object().shape({\n      codigo: Yup.string()\n        .required(\"Campo obrigatório\")\n        .length(6, \"Codigo inválido\"),\n    }),\n    handleSubmit({ codigo }, { props, setFieldError, setSubmitting }) {\n      setSubmitting(true);\n\n      if(props.location.state.pathname === \"/esqueci-senha\") {\n        props.history.push(\"/nova-senha\", {email: props.history.location.state.email, code: code})\n      } else {\n      Auth.confirmSignUp(props.history.location.state.email, codigo.toString())\n        .then((result) => {\n          setSubmitting(false);\n          Auth.signIn(\n            props.history.location.state.email,\n            props.history.location.state.senha\n          )\n            .then((response) => {\n              props.alert.success(\"E-mail validado com sucesso!\");\n              props.history.push(\"/seus-dados\", {\n                initCadastro: props.history.location.state.email,\n                senha: props.history.location.state.senha,\n                codigoconfimacao: codigo,\n              });\n              console.log(\n                \"Minhas props no codigo de confirmação são\",\n                props.history.location\n              );\n            })\n            .catch((error) => {\n              console.log(\"Erro \", error);\n              const messageDefault = \"Ocorreu um erro inesperado.\";\n            \n              const selectErrorMessage = {\n                NotAuthorizedException: \"E-mail ou senha incorretos.\",\n                UserNotFoundException: \"O usuário não foi encontrado.\",\n                PasswordResetRequiredException:\n                  'A sua senha foi resetada. Crie uma nova em \"esqueci minha senha\".',\n                InvalidPasswordException:\n                  \"A senha deve conter ao mínimo 8 dígitos.\",\n              };\n\n              return props.alert.error(selectErrorMessage[error.code] || messageDefault);\n            });\n        })\n        .catch((error) => {\n          console.log(\"Erro confirmando assinatura: \", error);\n          props.alert.error(\"Codigo de confirmação invalido\");\n          setSubmitting(false);\n        });\n      }\n    },\n  })(confirmSignUp)\n);\n\nexport default withAlert()(ConfirmSignupForm);\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/Users/luciano/Desktop/Projetos/PlayerStars/frontend/src/pages/CodConfirmacao/index.js\";\nimport React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { withAlert } from 'react-alert';\nimport { Auth } from \"aws-amplify\";\nimport { Form, withFormik } from \"formik\";\nimport * as Yup from \"yup\";\nimport PageContainer from \"../../components/features/PageContainer\";\nimport Email from \"../../assets/icons/email.png\";\nimport FormField from \"../../components/elements/FormField\";\nimport \"./styles.scss\";\n\nconst confirmSignUp = props => {\n  console.log(props);\n\n  const resendCode = ev => {\n    ev.preventDefault();\n    Auth.forgotPassword(props.history.location.state.email).then(data => {\n      props.alert.success('Codigo enviado');\n    }).catch(err => {\n      console.log('ERROR', err);\n      props.alert.error(err);\n    });\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(PageContainer, {\n    register: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"containerCodConfirm\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"lightBox\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"lightBoxContent\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: Email,\n    alt: \"Icone email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }), React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }, \"Confirme seu e-mail\"), React.createElement(\"p\", {\n    className: \"paragraph\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  }, \"Enviamos um c\\xF3digo de confirma\\xE7\\xE3o por e-mail para voc\\xEA. Por favor, digite-o abaixo.\"), React.createElement(Form, {\n    className: \"formConfirm\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"inputInline\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, React.createElement(FormField, {\n    id: \"codConfirm\",\n    type: \"text\",\n    name: \"codigo\",\n    label: \"C\\xF3digo de confirma\\xE7\\xE3o\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    className: \"btnDefault\",\n    type: \"submit\",\n    style: atv(),\n    disabled: !props.isValid,\n    required: props.isSubmitting,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, \"Confirmar\"), React.createElement(\"button\", {\n    className: \"btnSecundary\",\n    type: \"submit\",\n    onClick: resendCode,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, \"Reenviar C\\xF3digo\")))))));\n\n  function atv() {\n    const x = props.isValid;\n\n    if (x === true) {\n      return {\n        background: \"#000\"\n      };\n    } else {\n      return {\n        background: \"#BBB\"\n      };\n    }\n  }\n};\n\nconst ConfirmSignupForm = withRouter(withFormik({\n  mapPropsToValues({\n    codigo\n  }) {\n    return {\n      codigo: codigo || \"\"\n    };\n  },\n\n  validationSchema: Yup.object().shape({\n    codigo: Yup.string().required(\"Campo obrigatório\").length(6, \"Codigo inválido\")\n  }),\n\n  handleSubmit({\n    codigo\n  }, {\n    props,\n    setFieldError,\n    setSubmitting\n  }) {\n    setSubmitting(true);\n\n    if (props.location.state.pathname === \"/esqueci-senha\") {\n      props.history.push(\"/nova-senha\", {\n        email: props.history.location.state.email,\n        code: codigo\n      });\n    } else {\n      Auth.confirmSignUp(props.history.location.state.email, codigo.toString()).then(result => {\n        setSubmitting(false);\n        Auth.signIn(props.history.location.state.email, props.history.location.state.senha).then(response => {\n          props.alert.success(\"E-mail validado com sucesso!\");\n          props.history.push(\"/seus-dados\", {\n            initCadastro: props.history.location.state.email,\n            senha: props.history.location.state.senha,\n            codigoconfimacao: codigo\n          });\n          console.log(\"Minhas props no codigo de confirmação são\", props.history.location);\n        }).catch(error => {\n          console.log(\"Erro \", error);\n          const messageDefault = \"Ocorreu um erro inesperado.\";\n          const selectErrorMessage = {\n            NotAuthorizedException: \"E-mail ou senha incorretos.\",\n            UserNotFoundException: \"O usuário não foi encontrado.\",\n            PasswordResetRequiredException: 'A sua senha foi resetada. Crie uma nova em \"esqueci minha senha\".',\n            InvalidPasswordException: \"A senha deve conter ao mínimo 8 dígitos.\"\n          };\n          return props.alert.error(selectErrorMessage[error.code] || messageDefault);\n        });\n      }).catch(error => {\n        console.log(\"Erro confirmando assinatura: \", error);\n        props.alert.error(\"Codigo de confirmação invalido\");\n        setSubmitting(false);\n      });\n    }\n  }\n\n})(confirmSignUp));\nexport default withAlert()(ConfirmSignupForm);","map":{"version":3,"sources":["/Users/luciano/Desktop/Projetos/PlayerStars/frontend/src/pages/CodConfirmacao/index.js"],"names":["React","withRouter","withAlert","Auth","Form","withFormik","Yup","PageContainer","Email","FormField","confirmSignUp","props","console","log","resendCode","ev","preventDefault","forgotPassword","history","location","state","email","then","data","alert","success","catch","err","error","atv","isValid","isSubmitting","x","background","ConfirmSignupForm","mapPropsToValues","codigo","validationSchema","object","shape","string","required","length","handleSubmit","setFieldError","setSubmitting","pathname","push","code","toString","result","signIn","senha","response","initCadastro","codigoconfimacao","messageDefault","selectErrorMessage","NotAuthorizedException","UserNotFoundException","PasswordResetRequiredException","InvalidPasswordException"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { withAlert } from 'react-alert';\nimport { Auth } from \"aws-amplify\";\nimport { Form, withFormik } from \"formik\";\nimport * as Yup from \"yup\";\nimport PageContainer from \"../../components/features/PageContainer\";\nimport Email from \"../../assets/icons/email.png\";\nimport FormField from \"../../components/elements/FormField\";\n\nimport \"./styles.scss\";\n\nconst confirmSignUp = (props) => {\n  console.log(props)\n  const resendCode = ev => {\n    ev.preventDefault()\n    Auth.forgotPassword(props.history.location.state.email)\n    .then(data => {\n        props.alert.success('Codigo enviado');\n    })\n    .catch(err => {\n        console.log('ERROR', err);\n        props.alert.error(err);\n      });\n  }\n\n  return (\n    <>\n      <PageContainer register={true}>\n        <div className=\"containerCodConfirm\">\n          <div className=\"lightBox\">\n            <div className=\"lightBoxContent\">\n              <img src={Email} alt=\"Icone email\" />\n              <h3>Confirme seu e-mail</h3>\n              <p className=\"paragraph\">\n                Enviamos um código de confirmação por e-mail para você. Por favor, digite-o abaixo.\n              </p>\n              <Form className=\"formConfirm\">\n                <div className=\"inputInline\">\n                  <FormField\n                    id=\"codConfirm\"\n                    type=\"text\"\n                    name=\"codigo\"\n                    label=\"Código de confirmação\"\n                  />\n                </div>\n                <button\n                  className=\"btnDefault\"\n                  type=\"submit\"\n                  style={atv()}\n                  disabled={!props.isValid}\n                  required={props.isSubmitting}\n                >\n                  Confirmar\n                </button>\n                <button \n                className=\"btnSecundary\" \n                type=\"submit\"\n                onClick={resendCode}\n                >\n                  Reenviar Código\n                </button>\n              </Form>\n            </div>\n          </div>\n        </div>\n      </PageContainer>\n    </>\n  );\n  function atv() {\n    const x = props.isValid;\n    if (x === true) {\n      return { background: `#000` };\n    } else {\n      return { background: `#BBB` };\n    }\n  }\n};\n\nconst ConfirmSignupForm = withRouter(\n  withFormik({\n    mapPropsToValues({ codigo }) {\n      return {\n        codigo: codigo || \"\",\n      };\n    },\n    validationSchema: Yup.object().shape({\n      codigo: Yup.string()\n        .required(\"Campo obrigatório\")\n        .length(6, \"Codigo inválido\"),\n    }),\n    handleSubmit({ codigo }, { props, setFieldError, setSubmitting }) {\n      setSubmitting(true);\n      \n      if(props.location.state.pathname === \"/esqueci-senha\") {\n        props.history.push(\"/nova-senha\", {email: props.history.location.state.email, code: codigo})\n      } else {\n      Auth.confirmSignUp(props.history.location.state.email, codigo.toString())\n        .then((result) => {\n          setSubmitting(false);\n          Auth.signIn(\n            props.history.location.state.email,\n            props.history.location.state.senha\n          )\n            .then((response) => {\n              props.alert.success(\"E-mail validado com sucesso!\");\n              props.history.push(\"/seus-dados\", {\n                initCadastro: props.history.location.state.email,\n                senha: props.history.location.state.senha,\n                codigoconfimacao: codigo,\n              });\n              console.log(\n                \"Minhas props no codigo de confirmação são\",\n                props.history.location\n              );\n            })\n            .catch((error) => {\n              console.log(\"Erro \", error);\n              const messageDefault = \"Ocorreu um erro inesperado.\";\n            \n              const selectErrorMessage = {\n                NotAuthorizedException: \"E-mail ou senha incorretos.\",\n                UserNotFoundException: \"O usuário não foi encontrado.\",\n                PasswordResetRequiredException:\n                  'A sua senha foi resetada. Crie uma nova em \"esqueci minha senha\".',\n                InvalidPasswordException:\n                  \"A senha deve conter ao mínimo 8 dígitos.\",\n              };\n\n              return props.alert.error(selectErrorMessage[error.code] || messageDefault);\n            });\n        })\n        .catch((error) => {\n          console.log(\"Erro confirmando assinatura: \", error);\n          props.alert.error(\"Codigo de confirmação invalido\");\n          setSubmitting(false);\n        });\n      }\n    },\n  })(confirmSignUp)\n);\n\nexport default withAlert()(ConfirmSignupForm);\n"]},"metadata":{},"sourceType":"module"}